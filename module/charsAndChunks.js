const e=function(){let e,t;const n=function(){e=new WeakMap,t=new Map};n();const o=/^/,r=function(e){const t=e.char?"string"==typeof e.char&&1===e.char.length:e.regex?e.regex instanceof RegExp:void 0,n=("string"==typeof e.context&&(e.context=document.querySelector(e.context)),e.context instanceof Node),o="function"==typeof e.callback;e.comment&&"string"==typeof e.comment||(e.comment=`callback for ${e.char||"barcode"}`);const r=t&&n&&o;return r||console.error("Wrong properties for registering hotkeys or barcodes!"),r},c=function(n){const o=n.char||n.regex;t.set(o,n.context),e.has(n.context)||e.set(n.context,{}),e.get(n.context)[o]={callback:n.callback,comment:n.comment}},a=function(t,n){if((o=t)&&(o.getRootNode()instanceof Document||o.getRootNode()instanceof ShadowRoot)&&e.has(t))return e.get(t)[n];var o},i=function(e){if(t.has(e)){let n=t.get(e);return a(n,e)}};return{registerHotkey:function(e){delete e.regex,r(e)&&c(e)},hotkeyHandler:i,registerBarcode:function(e){delete e.char,e.regex||(e.regex=o),r(e)&&c(e)},barcodeHandler:function(e){const n=function(e){var n=o;return t.forEach((t,o)=>{o instanceof RegExp&&o.test(e)&&o.toString().length>n.toString().length&&(n=o)}),n}(e);return i(n)},overview:function(){let e={hotkey:[],barcode:[]};return t.forEach((t,n)=>{if("string"==typeof n){let o=a(t,n);if(o){let t={entry:n,comment:o.comment};e.hotkey.push(t)}}}),t.forEach((t,n)=>{if(n instanceof RegExp){if(a(t,n)){let o={entry:"barcode",comment:a(t,n).comment};e.barcode.push(o)}}}),e},reset:n}}(),t=function(){const t=["Alt","Shift"];let n=0,o="";const r=function(){if(o.length>=6){let t=e.barcodeHandler(o);t&&t.callback(o)}else if(1===o.length){let t=e.hotkeyHandler(o);t&&t.callback(o)}o=""};return window.addEventListener("keydown",(function(e){n&&clearTimeout(n);let c=1===e.key.length,a="INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName;if(!c||a){if("Enter"===e.key)return void r();if(!t.includes(e.key))return clearTimeout(n),void(o="")}else o+=e.key;n=setTimeout(r,30)})),{publicAPI:{hotkey:e.registerHotkey,barcode:e.registerBarcode,overview:e.overview,reset:e.reset},testAPI:{hotkeyHandler:e.hotkeyHandler,barcodeHandler:e.barcodeHandler}}}().publicAPI;export default t;
//# sourceMappingURL=charsAndChunks.js.map
