!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).charsAndChunks=t()}(this,(function(){"use strict";const e=function(){let e=new WeakMap,t=new Map;const n=/^/,o=function(e){const t=e.char?"string"==typeof e.char&&1===e.char.length:e.regex?e.regex instanceof RegExp:void 0,n=e.context instanceof Node,o="function"==typeof e.callback;e.comment||(e.comment=`callback for ${e.char||"barcode"}`);const r=t&&n&&o;return r||console.error("Wrong properties for registering hotkeys or barcodes!"),r},r=function(t,n){if(t&&t.parentNode&&e.has(t))return e.get(t)[n]},c=function(e){if(t.has(e)){let n=t.get(e);return r(n,e)}};return{registerHotkey:function(n){delete n.regex,o(n)&&(t.set(n.char,n.context),e.has(n.context)||e.set(n.context,{}),e.get(n.context)[n.char]={callback:n.callback,comment:n.comment})},hotkeyHandler:c,registerBarcode:function(r){delete r.char,r.regex||(r.regex=n),o(r)&&(t.set(r.regex,r.context),e.has(r.context)||e.set(r.context,{}),e.get(r.context)[r.regex]={callback:r.callback,comment:r.comment})},barcodeHandler:function(e){const o=function(e){var o=n;return t.forEach((t,n)=>{n instanceof RegExp&&n.test(e)&&n.toString().length>o.toString().length&&(o=n)}),o}(e);return c(o)},overview:function(){let e={hotkey:[],barcode:[]};return t.forEach((t,n)=>{if("string"==typeof n){let o=r(t,n);if(o){let t={entry:n,comment:o.comment};e.hotkey.push(t)}}}),t.forEach((t,n)=>{if(n instanceof RegExp){if(r(t,n)){let o={entry:"barcode",comment:r(t,n).comment};e.barcode.push(o)}}}),e}}}();return function(){const t=["Alt","Shift"];let n=0,o="";const r=function(){if(o.length>=6){let t=e.barcodeHandler(o);t&&t.callback(o)}else if(1===o.length){let t=e.hotkeyHandler(o);t&&t.callback(o)}o=""};return window.addEventListener("keydown",(function(e){n&&clearTimeout(n);let c=1===e.key.length,a="INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName;if(!c||a){if("Enter"===e.key)return void r();if(!t.includes(e.key))return clearTimeout(n),void(o="")}else o+=e.key;n=setTimeout(r,30)})),{publicAPI:{hotkey:e.registerHotkey,barcode:e.registerBarcode,overview:e.overview},testAPI:{hotkeyHandler:e.hotkeyHandler,barcodeHandler:e.barcodeHandler}}}().publicAPI}));
//# sourceMappingURL=charsAndChunks.js.map
